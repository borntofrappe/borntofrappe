<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>borntofrappe / blog / syntax-highlighting</title>
    <link rel="stylesheet" href="../global.css" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <a href="#content" class="visually-hidden" id="skip-to-content">
      Skip to Content
      <svg
        aria-hidden="true"
        aria-focusable="false"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="-50 -50 100 100"
        width="1em"
        height="1em"
      >
        <g
          fill="none"
          stroke="currentColor"
          stroke-width="10"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M 3 -20 h 22 a 20 20 0 0 1 0 40 h -22 l 10 -10 -10 10 10 10"
          />
          <path d="M -45 -20 h 28" />
          <path d="M -45 0 h 28" />
          <path d="M -45 20 h 28" />
        </g>
      </svg>
    </a>

    <div class="navigation">
      <nav aria-label="Breadcrumb navigation">
        <a href="/">
          borntofrappe
          <svg
            aria-hidden="true"
            aria-focusable="false"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-50 -50 100 100"
            width="1em"
            height="1em"
          >
            <g
              fill="none"
              stroke="currentColor"
              stroke-linejoin="round"
              stroke-linecap="round"
            >
              <g transform="rotate(45)">
                <path
                  stroke-width="8"
                  d="M -0 -46 q 23 15 23 52 v 10 a 8 8 0 0 1 -8 8 h -30 a 8 8 0 0 1 -8 -8 v -10 q 0 -37 23 -52"
                />
                <g stroke-width="7">
                  <path d="M 23 6 h 2 a 12 12 0 0 1 12 12 v 6 h -21" />
                  <path
                    transform="scale(-1 1)"
                    d="M 23 6 h 2 a 12 12 0 0 1 12 12 v 6 h -21"
                  />
                  <path
                    d="M 0 24 c -10 5 -12 16 0 22.5 c 12 -6.5 10 -17.5 0 -22.5"
                  />
                  <circle r="9" cy="-11" />
                </g>
              </g>
            </g>
          </svg>
        </a>
        <a href="/">
          / blog
          <svg
            aria-hidden="true"
            aria-focusable="false"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-50 -50 100 100"
            width="1em"
            height="1em"
          >
            <g
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <g stroke-width="8">
                <path
                  d="M -26 -19 h -20 v -6 a 12 12 0 0 1 24 0 v 50 a 12 12 0 0 0 24 0 v -5 h 44 v 5 a 12 12 0 0 1 -12 12 h -44 a 12 12 0 0 1 -12 -12"
                />
                <path
                  d="M -34 -37 h 44 a 12 12 0 0 1 12 12 v 45 h -20 v 5 a 12 12 0 0 1 -24 0 v -50 a 12 12 0 0 0 -12 -12"
                />
              </g>
              <g stroke-width="6">
                <path d="M -10 -20 h 20" />
                <path d="M -10 -8 h 10" />
                <path d="M -10 4 h 15" />
                <path d="M -10 16 h 5" />
              </g>
            </g>
          </svg>
        </a>
        <a href="/blog/syntax-highlighting">
          syntax-highlighting
        </a>
      </nav>

      <button disabled>
        <span class="visually-hidden">Toggle color scheme</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="-75 -150 150 150"
          width="1em"
          height="1em"
        >
          <g class="scale">
            <g class="rotate" fill="currentColor">
              <g transform="translate(0 -75)">
                <g transform="scale(-1 1)">
                  <g class="rotate">
                    <g transform="scale(-1 1)">
                      <circle r="22" />
                      <circle transform="translate(0 41.2)" r="8.8" />
                      <circle
                        transform="rotate(45) translate(0 41.2)"
                        r="8.8"
                      />
                      <circle
                        transform="rotate(90) translate(0 41.2)"
                        r="8.8"
                      />
                      <circle
                        transform="rotate(135) translate(0 41.2)"
                        r="8.8"
                      />
                      <circle
                        transform="rotate(180) translate(0 41.2)"
                        r="8.8"
                      />
                      <circle
                        transform="rotate(225) translate(0 41.2)"
                        r="8.8"
                      />
                      <circle
                        transform="rotate(270) translate(0 41.2)"
                        r="8.8"
                      />
                      <circle
                        transform="rotate(315) translate(0 41.2)"
                        r="8.8"
                      />
                    </g>
                  </g>
                </g>
              </g>
              <g transform="translate(0 75)">
                <g transform="scale(-1 1)">
                  <g class="rotate">
                    <g transform="scale(-1 1)">
                      <g class="scale">
                        <path
                          d="M-5.435-27.43A28 28 0 000 28.02 28 28 0 0027.435 5.45 28 28 0 0122 6.019a28 28 0 01-27.435-33.43z"
                        />
                      </g>
                    </g>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
      </button>
    </div>

    <header>
      <h1>Syntax Highlighting</h1>
      <h2 class="visually-hidden">Tags</h2>
      <ul>
        <li>
          <span class="visually-hidden">html</span>
          <svg
            aria-hidden="true"
            aria-focusable="false"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-50 -50 100 100"
            width="1em"
            height="1em"
          >
            <g fill="currentColor" stroke="none">
              <path
                d="M-40.002-50l5.004 85L.001 50.001l34.998-15.003L40.003-50h-80.007zm14.003 17.5h52l-.65 11.049h-39.649l.651 11.054H24.7L22.751 22.75 0 32.503l-22.75-9.752-.65-11.05h11.049l.325 5.525 12.026 5.2 12.026-5.2.977-16.574H-24.05L-25.998-32.5z"
              />
            </g>
          </svg>
        </li>
        <li>
          <span class="visually-hidden">svg</span>
          <svg
            aria-hidden="true"
            aria-focusable="false"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-50 -50 100 100"
            width="1em"
            height="1em"
          >
            <g fill="currentColor" stroke="currentColor" stroke-width="8">
              <path
                d="M 0 0 v 36 a 5 5 0 0 1 0 10 5 5 0 0 1 0 -10 v -72 a 5 5 0 0 1 0 -10 5 5 0 0 1 0 10"
              />
              <path
                transform="rotate(45)"
                d="M 0 0 v 36 a 5 5 0 0 1 0 10 5 5 0 0 1 0 -10 v -72 a 5 5 0 0 1 0 -10 5 5 0 0 1 0 10"
              />
              <path
                transform="rotate(90)"
                d="M 0 0 v 36 a 5 5 0 0 1 0 10 5 5 0 0 1 0 -10 v -72 a 5 5 0 0 1 0 -10 5 5 0 0 1 0 10"
              />
              <path
                transform="rotate(135)"
                d="M 0 0 v 36 a 5 5 0 0 1 0 10 5 5 0 0 1 0 -10 v -72 a 5 5 0 0 1 0 -10 5 5 0 0 1 0 10"
              />
            </g>
          </svg>
        </li>
        <li>
          <span class="visually-hidden">node</span>
          <svg
            aria-hidden="true"
            aria-focusable="false"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-50 -50 100 100"
            width="1em"
            height="1em"
          >
            <g
              fill="none"
              stroke="currentColor"
              stroke-width="8"
              stroke-linejoin="round"
              stroke-linecap="round"
            >
              <path
                d="M -25 33 l -18 -9 v -48 l 44 -22 44 22 v 48 l -44 22 -7 -3.5"
              />
              <path d="M -14 -19 v 42.5 a 10 10 0 0 1 -10 10" />
              <path
                d="M 24 -9 a 10 10 0 0 0 -20 0 10 10 0 0 0 10 10 10 10 0 0 1 10 10 10 10 0 0 1 -20 0"
              />
            </g>
          </svg>
        </li>
      </ul>
    </header>

    <main id="content">
      <p>
        Following the instructions detailed in the mardkwon file
        <strong>From Markdown to HTML</strong>, I set out to include syntax
        highlighting with the aforementioned <code>shiki</code> module.
      </p>
      <div class="code">
        <span
          ><svg
            aria-hidden="true"
            aria-focusable="false"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-50 -50 100 100"
            width="1em"
            height="1em"
          >
            <g fill="currentColor" stroke="none">
              <path
                d="M-50-50V50.8h38.4c-8.88 0-16.08-7.2-16.08-16.08v-5.04h10.08v5.04c0 3.36 2.64 6 6 6s6-2.64 6-6V.88H4.48v33.84c0 8.88-7.2 16.08-16.08 16.08H9.52V40.72H24.64c2.88 0 5.04-2.208 5.04-5.04s-2.184-5.04-5.04-5.04c-8.4 0-15.12-6.72-15.12-15.12S16.24.4 24.64.4h13.2v10.08h-13.2c-2.88 0-5.04 2.208-5.04 5.04s2.184 5.04 5.04 5.04c8.4 0 15.12 6.72 15.12 15.12S33.04 50.8 24.64 50.8h24V-50h-100.8z"
              />
            </g></svg
          >js</span
        >
        <pre
          class="shiki"
          style="background-color: #292d3e;"
        ><code><span style="color: #C792EA">const</span><span style="color: #FFFFFF"> </span><span style="color: #A6ACCD">path</span><span style="color: #FFFFFF"> </span><span style="color: #C792EA">=</span><span style="color: #FFFFFF"> </span><span style="color: #82AAFF">require</span><span style="color: #FFFFFF">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">path</span><span style="color: #89DDFF">"</span><span style="color: #FFFFFF">)</span><span style="color: #89DDFF">;</span>
<span style="color: #C792EA">const</span><span style="color: #FFFFFF"> </span><span style="color: #A6ACCD">fs</span><span style="color: #FFFFFF"> </span><span style="color: #C792EA">=</span><span style="color: #FFFFFF"> </span><span style="color: #82AAFF">require</span><span style="color: #FFFFFF">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">fs</span><span style="color: #89DDFF">"</span><span style="color: #FFFFFF">)</span><span style="color: #89DDFF">;</span>
<span style="color: #C792EA">const</span><span style="color: #FFFFFF"> </span><span style="color: #A6ACCD">marked</span><span style="color: #FFFFFF"> </span><span style="color: #C792EA">=</span><span style="color: #FFFFFF"> </span><span style="color: #82AAFF">require</span><span style="color: #FFFFFF">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">marked</span><span style="color: #89DDFF">"</span><span style="color: #FFFFFF">)</span><span style="color: #89DDFF">;</span>
<span style="color: #C792EA">const</span><span style="color: #FFFFFF"> </span><span style="color: #A6ACCD">shiki</span><span style="color: #FFFFFF"> </span><span style="color: #C792EA">=</span><span style="color: #FFFFFF"> </span><span style="color: #82AAFF">require</span><span style="color: #FFFFFF">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">shiki</span><span style="color: #89DDFF">"</span><span style="color: #FFFFFF">)</span><span style="color: #89DDFF">;</span></code></pre>
      </div>
      <p>
        Looking at
        <a href="https://shiki.matsu.io/">the website for the shiki module</a>,
        I tried to replicate the example provided for the
        <code>markedown-it</code> package, just with
        <code>marked</code> instead.
      </p>
      <p>
        It took surprisingly little, but the idea is to include the highlighter
        in the <code>highlight</code> field of the options in the markdown
        parser.
      </p>
      <div class="code">
        <span
          ><svg
            aria-hidden="true"
            aria-focusable="false"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-50 -50 100 100"
            width="1em"
            height="1em"
          >
            <g fill="currentColor" stroke="none">
              <path
                d="M-50-50V50.8h38.4c-8.88 0-16.08-7.2-16.08-16.08v-5.04h10.08v5.04c0 3.36 2.64 6 6 6s6-2.64 6-6V.88H4.48v33.84c0 8.88-7.2 16.08-16.08 16.08H9.52V40.72H24.64c2.88 0 5.04-2.208 5.04-5.04s-2.184-5.04-5.04-5.04c-8.4 0-15.12-6.72-15.12-15.12S16.24.4 24.64.4h13.2v10.08h-13.2c-2.88 0-5.04 2.208-5.04 5.04s2.184 5.04 5.04 5.04c8.4 0 15.12 6.72 15.12 15.12S33.04 50.8 24.64 50.8h24V-50h-100.8z"
              />
            </g></svg
          >js</span
        >
        <pre
          class="shiki"
          style="background-color: #292d3e;"
        ><code><span style="color: #A6ACCD">marked</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">setOptions</span><span style="color: #FFFFFF">(</span><span style="color: #89DDFF">{</span>
<span style="color: #FFFFFF">  </span><span style="color: #82AAFF">highlight</span><span style="color: #89DDFF">:</span><span style="color: #FFFFFF"> </span><span style="color: #89DDFF">(</span><span style="color: #FF5370">code</span><span style="color: #89DDFF">,</span><span style="color: #FFFFFF"> </span><span style="color: #FF5370">lang</span><span style="color: #89DDFF">)</span><span style="color: #FFFFFF"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #FFFFFF"> </span><span style="color: #A6ACCD">highlighter</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">codeToHtml</span><span style="color: #FFFFFF">(</span><span style="color: #A6ACCD">code</span><span style="color: #89DDFF">,</span><span style="color: #FFFFFF"> </span><span style="color: #A6ACCD">lang</span><span style="color: #FFFFFF">)</span><span style="color: #89DDFF">,</span>
<span style="color: #89DDFF">}</span><span style="color: #FFFFFF">)</span><span style="color: #89DDFF">;</span></code></pre>
      </div>
      <p>
        Once this option is set, I continue parsing the markdown files as
        specified in the previous script.
      </p>
      <p>
        I decided to save the script in a separate file,
        <code>script-syntax.js</code>, to better analyze the modules
        contribution.
      </p>
      <p>
        I also tried to include a different theme, using night owl, and while I
        ended up sticking with one of the given options, it was good practice to
        figure out what it would take.
      </p>
      <ul>
        <li>
          <p>
            download the theme, placing the
            <a
              href="https://github.com/sdras/night-owl-vscode-theme/blob/master/themes/Night%20Owl-color-theme.json"
              >json file</a
            >
            in the root folder
          </p>
        </li>
        <li>
          <p>
            use the <code>loadTheme</code> function and pipe the theme directly
            in the script
          </p>
        </li>
      </ul>
      <div class="code">
        <span
          ><svg
            aria-hidden="true"
            aria-focusable="false"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="-50 -50 100 100"
            width="1em"
            height="1em"
          >
            <g fill="currentColor" stroke="none">
              <path
                d="M-50-50V50.8h38.4c-8.88 0-16.08-7.2-16.08-16.08v-5.04h10.08v5.04c0 3.36 2.64 6 6 6s6-2.64 6-6V.88H4.48v33.84c0 8.88-7.2 16.08-16.08 16.08H9.52V40.72H24.64c2.88 0 5.04-2.208 5.04-5.04s-2.184-5.04-5.04-5.04c-8.4 0-15.12-6.72-15.12-15.12S16.24.4 24.64.4h13.2v10.08h-13.2c-2.88 0-5.04 2.208-5.04 5.04s2.184 5.04 5.04 5.04c8.4 0 15.12 6.72 15.12 15.12S33.04 50.8 24.64 50.8h24V-50h-100.8z"
              />
            </g></svg
          >js</span
        >
        <pre
          class="shiki"
          style="background-color: #292d3e;"
        ><code><span style="color: #C792EA">const</span><span style="color: #FFFFFF"> </span><span style="color: #A6ACCD">theme</span><span style="color: #FFFFFF"> </span><span style="color: #C792EA">=</span><span style="color: #FFFFFF"> </span><span style="color: #A6ACCD">shiki</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">loadTheme</span><span style="color: #FFFFFF">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">./Night-Owl-color-theme.json</span><span style="color: #89DDFF">"</span><span style="color: #FFFFFF">)</span><span style="color: #89DDFF">;</span>

<span style="color: #A6ACCD">shiki</span>
<span style="color: #FFFFFF">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getHighlighter</span><span style="color: #FFFFFF">(</span><span style="color: #89DDFF">{</span>
<span style="color: #FFFFFF">    </span><span style="color: #A6ACCD">theme</span><span style="color: #89DDFF">,</span>
<span style="color: #FFFFFF">  </span><span style="color: #89DDFF">}</span><span style="color: #FFFFFF">)</span>
<span style="color: #FFFFFF">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #FFFFFF">()</span><span style="color: #89DDFF">;</span></code></pre>
      </div>
      <p>Store it in the <em>good to know</em> drawer.</p>
    </main>

    <footer>
      <a href="https://twitter.com/borntofrappe">borntofrappe</a>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
