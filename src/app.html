<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="/icons/favicon.ico" />
    <link rel="icon" href="/icons/icon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
    <link rel="manifest" href="/manifest.json" />

    <script>
      try {
        function setPreference(preference) {
          document
            .querySelector('html')
            .setAttribute('data-preference', preference);
          localStorage.setItem('color-scheme', preference);
        }

        const prefersColorScheme = matchMedia('(prefers-color-scheme: dark)');
        const colorScheme = localStorage.getItem('color-scheme');

        if (colorScheme) {
          setPreference(colorScheme);
        } else {
          setPreference(prefersColorScheme.matches ? 'dark' : 'light');
        }
      } catch (e) {
        console.error(e);
      }
    </script>

    %svelte.head%
  </head>
  <body>
    <div id="svelte">%svelte.body%</div>
  </body>
</html>
